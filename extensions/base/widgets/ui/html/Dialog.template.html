<div class="dialog_wrapper" id="dialog_wrapper">
	<div class="dialog" id="dialog" style="width:{DIALOG_WIDTH}">
		
		<div title="schlieÃŸen ohne zu speichern" class="close-button" onclick="closeDialog()"></div>
		
		<div class="infoBar"><h2>{DIALOG_TITLE}</h2>
		<!-- BEGIN BLOCK_DIALOG_DESCRIPTION -->
		{DIALOG_DESCRIPTION}
		<!-- END BLOCK_DIALOG_DESCRIPTION -->
		</div>
		{DIALOG_CONTENT}
		<br style="clear:both">
                
                
		
                <!-- BEGIN SAVE_AND_CLOSE_BUTTON -->
		<div style="float:right; margin-bottom:20px;"><a class="button pill" onclick="
                    //count the changes and if there is at least one reload the site
                    var i = 0;
                    var elementsToSave = $('.changed')
                    var j = elementsToSave.size();
                    
                    if(j == 0){
                        closeDialog();
                    }
                                         
                    {SAVE_AND_CLOSE_BUTTON_JS}
                    elementsToSave.each(function(number, obj) {
                        eval($(obj).attr('data-saveFunction'));
                        
                    });
                    
                    function dataSaveFunctionCallback(response){
                        i++;
                        if(j == i) {
                            closeDialog();
                            {SAVE_AND_CLOSE_BUTTON_RELOAD}
                            i = 0;
                        }
                            
                    }
                    
                    " href="#">{SAVE_AND_CLOSE_BUTTON_LABEL}</a></div>
		<!-- END SAVE_AND_CLOSE_BUTTON -->
		
                <!-- BEGIN CANCEL_BUTTON -->
		<div style="float:right; margin-bottom:20px;"><a class="button pill negative" onclick="
                    {CANCEL_BUTTON_JS}
                    
                    closeDialog();
                    {CANCEL_BUTTON_RELOAD}
                    
                    " href="#">{CANCEL_BUTTON_LABEL}</a>&nbsp;</div>
		<!-- END CANCEL_BUTTON -->
                
                
                <!-- BEGIN BLOCK_CUSTOM_BUTTONS -->
		<div style="float:right"><a class="button pill {BUTTON_CLASS}" onclick="{BUTTON_JS}" href="#">{BUTTON_LABEL}</a>&nbsp;</div>
		<!-- END BLOCK_CUSTOM_BUTTONS -->
	</div>
</div>

<script type="text/javascript">
    	jQuery('#dialog_wrapper').css({"right": $(window).width() / 2 - jQuery('#dialog').width() / 2 + "px"});
	var resizeTimer = null;
	jQuery(window).bind('resize', function() {
		if (resizeTimer) clearTimeout(resizeTimer);
		resizeTimer = setTimeout(function() {jQuery('#dialog_wrapper').css({"right": $(window).width() / 2 - jQuery('#dialog').width() / 2 + "px"});}, 100);
	});
	jQuery('#dialog').slideDown("slow");
        //close the dialog on escape
        jQuery(document).keyup(function(e) {
            if (e.keyCode == 27) {closeDialog();}
        });
        
        
        
</script>