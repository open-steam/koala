<script>
    var updateExplorerTagList = function() {
        var value = this.value;
        var filterButtonID = $(this).prev().prev().attr('id');
        if(value == ""){
            $("#"+filterButtonID).hide();
        }
        else{
            $("#"+filterButtonID).show();
        }
        var items = $('.listviewer').children();
        items.each(
                function() {
                    if(this.className.indexOf("noitem") > -1){
                        $("#search-area").hide();
                    }
                    else{
                        $("#search-area").show();
                        var nameIndex = "#" + this.id + "_1";
                        var descriptionIndex = "#" + this.id + "_3";
                        var tagIndex = "#" + this.id + "_4";
                        var name = $(nameIndex).text().toLowerCase();
                        var tags = $(tagIndex).text().toLowerCase();
                        var description = $(descriptionIndex).text().toLowerCase();
                        if ((tags.indexOf(value.toLowerCase()) == -1) && (name.indexOf(value.toLowerCase()) == -1) && (description.indexOf(value.toLowerCase()) == -1)) {
                            $(('#' + this.id)).removeClass("show");
                            $(('#' + this.id)).addClass("hide");
                            $(('#' + this.id)).hide();
                        } else {
                            $(('#' + this.id)).removeClass("hide");
                            $(('#' + this.id)).addClass("show");
                            $(('#' + this.id)).show();
                        }
                    }
                }
        );
    };

    var updateGalleryTagList = function() {
        var value = this.value;
        var filterButtonID = $(this).prev().prev().attr('id');
        if(value == ""){
            $("#"+filterButtonID).hide();
        }
        else{
            $("#"+filterButtonID).show();
        }
        var items = $('#explorerGallery').children();
        items.each(
                function() {
                    if(this.className.indexOf("noitem") > -1){
                        $("#search-area").hide();
                    }
                    else{
                        $("#search-area").show();
                        var tagIndex = $(this).find("p"); //for description and tags
                        var nameIndex = $(this).find("a");
                        var name = $(nameIndex).text().toLowerCase();
                        var tags = $(tagIndex).text().toLowerCase();
                        if ((tags.indexOf(value.toLowerCase()) == -1) && (name.indexOf(value.toLowerCase()) == -1)) {
                            $(('#' + this.id)).removeClass("show");
                            $(('#' + this.id)).addClass("hide");
                            $(('#' + this.id)).hide();
                        } else {
                            $(('#' + this.id)).removeClass("hide");
                            $(('#' + this.id)).addClass("show");
                            $(('#' + this.id)).show();
                        }
                    }
                }
        );
    };

    $(function() {
        var availableTags = [
            {AUTOCOMPLETE_VALUES}
        ];
        $("#{ID}").autocomplete({
            source: availableTags,
            close: {FUNCTION},
            change: {FUNCTION},

        });
    });

</script>
<style>
    .search-widget{
        float: right;
        
    }
    .search-input{
        
    }
</style>

<div id="search-area" class="search-widget">{POPUPMENU_HTML}<input class="search-input" id="{ID}" placeholder="Suche"></div>

<div id="search-area-popupmenu"></div>

<script>
    $(document).ready(function(){
      $("#{ID}").keyup({FUNCTION});
      $("#{ID}").val(decodeURI("{VALUE}"));
      $(document).bind({TRIGGER}, function(){
        $("#{ID}").each({FUNCTION});
      });
    });
</script>
